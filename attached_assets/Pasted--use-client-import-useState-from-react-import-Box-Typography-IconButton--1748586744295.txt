"use client";
import { useState } from "react";
import {
  Box,
  Typography,
  IconButton,
  Chip,
  Grid,
  useMediaQuery,
} from "@mui/material";
import {
  ArrowBackIos,
  ArrowForwardIos,
  NearMe,
  ArrowOutward,
} from "@mui/icons-material";
import styles from "./style";
import GitHubIcon from "@mui/icons-material/GitHub";

const projects = [
  {
    title: "Beauty salon website",
    description:
      "One of the featured sites while working with TheBrandWiz.com (agency). Worked as a frontend developer to make the site user interactive and responsive.",
    imageUrl: "/p3.png",
    tags: ["#reactjs", "#nextjs", "#expressjs", "#mongoDB", "#nodejs"],
    color: "orange",
    code: "https://github.com/Nafeesa-shehzadi/complete-furniro-website",
  },
  {
    title: "Company site",
    description:
      "Harigurus is a new-age site for all Hindu, religious, ancient and traditional literature. Built the complete site from scratch.",
    imageUrl: "/p1.png",
    tags: ["#reactjs", "#nextjs", "#expressjs", "#mongoDB", "#nodejs"],
    color: "orange",
    link: "https://website-seven-alpha-90.vercel.app/",
    code: "https://github.com/Nafeesa-shehzadi/complete-furniro-website",
  },
  {
    title: "Furniro website",
    description:
      "Another project description goes here. Worked on multiple features and enhancements to improve user experience.",
    imageUrl: "/p4.png",
    tags: ["#reactjs", "#nextjs", "#expressjs", "#mongoDB", "#nodejs"],
    color: "purple",
    link: "https://furniro-website-sigma.vercel.app/",
    code: "https://github.com/Nafeesa-shehzadi/complete-furniro-website",
  },

  {
    title: "Factory girl",
    description:
      "Another project description goes here. Worked on multiple features and enhancements to improve user experience.",
    imageUrl: "/img1.png",
    tags: ["#reactjs", "#nextjs", "#expressjs", "#mongoDB", "#nodejs"],
    color: "purple",
    code: "https://github.com/Nafeesa-shehzadi/complete-furniro-website",
  },

  {
    title: "Ai MedLab",
    description:
      "Being a Content and Frontend lead, the site is a highly responsive and interactive website. Created new features and pages. Worked as a team with product managers and designers.",
    imageUrl: "/p2.png",
    tags: ["#reactjs", "#nextjs", "#expressjs", "#mongoDB", "#nodejs"],
    color: "teal",
    code: "https://github.com/Nafeesa-shehzadi/complete-furniro-website", 
  },
];

const Projects = () => {
  const [currentIndex, setCurrentIndex] = useState(1);

  const handleNext = () => {
    setCurrentIndex((prevIndex) => (prevIndex + 1) % projects.length);
  };

  const handlePrevious = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex === 0 ? projects.length - 1 : prevIndex - 1
    );
  };
  const isMobile = useMediaQuery("(max-width:850px)");

  return (
    <Box
      id="mywork"
      sx={{
        textAlign: "center",
        p: 2,
        backgroundColor: "primary.colorBg",
        color: "primary.txtColor",
        width: "100%",
      }}
    >
      <Typography variant="h4" gutterBottom sx={styles.heading}>
        My Work
      </Typography>
      {/* Carousel Row */}
      <Box
        sx={{
          display: "flex",
          justifyContent: "center",
          alignItems: "center",
          position: "relative",
          gap: isMobile ? 0 : 10, // No gap on mobile
          mb: 4,
          overflow: "hidden",
          height: isMobile ? "200px" : "400px", // Adjust height for mobile
        }}
      >
        {projects.map((project, index) => {
          if (isMobile && index !== currentIndex) {
            // Only show the current image on mobile
            return null;
          }

          const position =
            (index - currentIndex + projects.length) % projects.length;

          let transform;
          let opacity;
          let zIndex;

          if (position === 0) {
            // Center image
            transform = "translateX(0) scale(1.05)";
            opacity = 1;
            zIndex = 2;
          } else if (position === projects.length - 1) {
            // Left image
            transform = "translateX(-100%) scale(0.9)";
            opacity = 0.5;
            zIndex = 1;
          } else if (position === 1) {
            // Right image
            transform = "translateX(100%) scale(0.9)";
            opacity = 0.5;
            zIndex = 1;
          } else {
            // Hidden images
            transform = "translateX(200%) scale(0.8)";
            opacity = 0;
            zIndex = 0;
          }

          return (
            <Box
              key={index}
              sx={{
                width: isMobile ? "100%" : "30%", // Full width on mobile
                position: "absolute",
                transition: "all 0.5s ease-in-out",
                transform,
                opacity,
                zIndex,
              }}
            >
              <img
                src={project.imageUrl}
                alt={project.title}
                style={{
                  width: "100%",
                  borderRadius: "8px",
                }}
              />
            </Box>
          );
        })}
      </Box>
      {/* Project Title and Buttons */}
      <Box
        sx={{
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          justifyContent: "center",
          width: isMobile ? "90%" : "40%",
          margin: "0 auto",
        }}
      >
        <Box
          sx={{
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            gap: 4,
            mb: 2,
            width: "100%",
          }}
        >
          <IconButton
            onClick={handlePrevious}
            sx={{
              border: "1px solid",
              borderRadius: "50%",
              backgroundColor: "primary.colorBg",
              color: "primary.txtColor",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
            }}
          >
            <ArrowBackIos />
          </IconButton>
          <Typography variant="h5" sx={{ flexGrow: 1, textAlign: "center" }}>
            {projects[currentIndex].title}
          </Typography>
          <IconButton
            onClick={handleNext}
            sx={{
              border: "1px solid",
              borderRadius: "50%",
              backgroundColor: "primary.colorBg",
              color: "primary.txtColor",
            }}
          >
            <ArrowForwardIos />
          </IconButton>
        </Box>

        <Typography variant="body1" sx={{ mb: 2, textAlign: "center" }}>
          {projects[currentIndex].description}
        </Typography>

        {/* Project Technologies */}
        <Grid container spacing={1} justifyContent="center">
          {projects[currentIndex].tags.map((tag, index) => (
            <Grid item key={index}>
              <Chip
                label={tag}
                sx={{
                  backgroundColor: projects[currentIndex].color,
                  color: "#fff",
                }}
              />
            </Grid>
          ))}
        </Grid>
        <Grid container spacing={2} justifyContent="center" sx={{ mt: 2 }}>
          {projects[currentIndex].link && (
            <Grid item>
              <Typography
                variant="body1"
                sx={{
                  textAlign: "start",
                  color: "primary.txtColor",
                  display: "flex",
                  alignItems: "center",
                  gap: 1,
                  "&:hover": {
                    opacity: 0.8,
                  },
                }}
              >
                <a
                  href={projects[currentIndex].link}
                  target="_blank"
                  rel="noopener noreferrer"
                  style={{
                    color: "inherit",
                    textDecoration: "underline",
                    display: "flex",
                    alignItems: "center",
                    gap: "8px",
                  }}
                >
                  <NearMe sx={{ fontSize: "1rem" }} />
                  demo
                </a>
              </Typography>
            </Grid>
          )}
          {projects[currentIndex].code && (
            <Grid item>
              <Typography
                variant="body1"
                sx={{
                  textAlign: "start",
                  color: "primary.txtColor",
                  display: "flex",
                  alignItems: "center",
                  gap: 1,
                  "&:hover": {
                    opacity: 0.8,
                  },
                }}
              >
                <a
                  href={projects[currentIndex].code}
                  target="_blank"
                  rel="noopener noreferrer"
                  style={{
                    color: "inherit",
                    textDecoration: "underline",
                    display: "flex",
                    alignItems: "center",
                    gap: "8px",
                  }}
                >
                  <GitHubIcon sx={{ fontSize: "1rem" }} />
                  Code
                </a>
              </Typography>
            </Grid>
          )}
        </Grid>
      </Box>
    </Box>
  );
};

export default Projects;
